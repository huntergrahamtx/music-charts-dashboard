2025-07-21 4:54 PM

Tags: [[music dashboard project]] [[API]] #programming

*Preceding step:* [[1. Create and prepare data structure for the API calls and responses]]
*Following step:* [[3. Search For Item() Spotify API Calls]]

> [!todo] Step 2 Objective
> Using the country code list from the database, iterate over each country as arguments into the `Get_Charts` YTMusic API call, parse each response, and store the relevant metrics.

### Step 2a) Import `ytmusicapi` package and set up credentials
- [ ] **Securely** set up YouTube Music API authorization credentials for use in calls
```python
from dotenv import load_dotenv
import os

load_dotenv()  # this loads the .env file

google_client_id = os.getenv("SPOTIFY_CLIENT_ID")
google_client_secret = os.getenv("SPOTIFY_CLIENT_SECRET")
```

- [ ] Import `ytmusicapi` package and instantiate the class

### Step 2b) Make `Get_Charts()` call with each country and then parse and store each response

- [ ] Make the `Get_Charts()` call for global data and for each country
	- [ ] retrieve each country code (as keys) from the dictionary holding all of the API data
	- [ ] loop over the country codes in the API call
		- [ ] iterate through country codes
		- [ ] make `Get_Charts()` call using a country code as the argument
			- [ ] retrieve just the track list and its respective rankings, and artist list and its respective rankings
		- [ ] store responses as dictionary values in the lowest-level dictionary with their respective keys






## Connected Notes / References
[[Get Charts()]]